{% extends 'homepage/header.html' %}
{% load static %}
{% block content %}
<style>
    .post-a-job {
        padding: 120px 0;
    }

    #submit-button {
        width: 100px;
    }

    .post-sec-card {
        background-color: #fff;
        border: 0.5px solid rgba(0, 0, 0, .5);
        padding: 10px;
        margin: 10px;
        width: 100%;
    }

    .card .card-body p {
        font-size: 1.5rem;
    }
</style>
<div class="post-a-job">
    <div class="container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        <h2>Post a Job</h2>
        <form method="POST" onsubmit="return validateJobPost();">
            <!-- Token block needed for added security -->
            {% csrf_token %}
            <div class="card post-sec-card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <p class="card-titles">Choose Services:</p>
                            {{ form.client }}
                            <div class="form-group">
                                {{ form.captions.label }}
                                {{ form.captions }}
                            </div>
                            <div class="form-group">
                                {{ form.search_for_content.label }}
                                {{ form.search_for_content }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <p class="card-titles">Job Details</p>

                            <div class="form-group">
                                {{ form.length.label }}
                                {{ form.length }}
                            </div>
                            <div class="form-group">
                                {{ form.number_of_post.label }}
                                {{ form.number_of_post }}
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        {{ form.service_description.label }}
                        {{ form.service_description }}
                    </div>
                </div>
            </div>
            <div class="card post-sec-card">
                <div class="card-body">
                    <p class="card-titles">Choose Platforms:</p>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form.instagram.label }}
                                {{ form.instagram }}
                            </div>
                            <div class="form-group">
                                {{ form.facebook.label }}
                                {{ form.facebook }}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form.instagram_username.label }}
                                {{ form.instagram_username }}
                            </div>
                            <div class="form-group">
                                {{ form.facebook_username.label }}
                                {{ form.facebook_username }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <input id="submit-button" type="submit" class="btn btn-primary" value="Post">
        </form>
    </div>
</div>
<script>
    // changing input on load for arguments
    (function () {
        {% if request.GET.length %}
        document.getElementById('id_length').value = {{ request.GET.length }}
        {% endif %}
        {% if request.GET.number_of_post %}
        document.getElementById('id_post_per_day').value = {{ request.GET.number_of_post }}
        {% endif %}
        {% if request.GET.captions %}
        document.getElementById('id_captions').checked = {{ request.GET.captions }}
        {% endif %}
        {% if request.GET.search_for_content %}
        document.getElementById('id_search_for_content').checked = {{ request.GET.search_for_content }}
        {% endif %}
        {% if request.GET.instagram %}
        document.getElementById('id_instagram').checked = {{ request.GET.instagram }}
        {% endif %}
        {% if request.GET.facebook %}
        document.getElementById('id_facebook').checked = {{ request.GET.facebook }}
        {% endif %}
    // Getting data
    let instagramItem = document.getElementById('id_instagram')
    let facebookItem = document.getElementById('id_facebook')

    // Running check func to see if checkboxes are selected onload
    checkPlatformInstagram(instagramItem)
    checkPlatformFacebook(facebookItem)

    }) ();
    function checkPlatformInstagram(e) {
        let result = e.checked
        instagramUsernameTextbox = document.getElementById('id_instagram_username')
        if (result == true) {
            instagramUsernameTextbox.removeAttribute('readonly')
            instagramUsernameTextbox.setAttribute('placeholder', 'Enter')
        } else {
            instagramUsernameTextbox.setAttribute('readonly', 'readonly')
            instagramUsernameTextbox.removeAttribute('placeholder')
            instagramUsernameTextbox.value = ''
        }
    }
    function checkPlatformFacebook(e) {
        let result = e.checked
        facebookUsernameTextbox = document.getElementById('id_facebook_username')
        if (result == true) {
            facebookUsernameTextbox.removeAttribute('readonly')
            facebookUsernameTextbox.setAttribute('placeholder', 'Enter')
        } else {
            facebookUsernameTextbox.setAttribute('readonly', 'readonly')
            facebookUsernameTextbox.removeAttribute('placeholder')
            facebookUsernameTextbox.value = ''
        }
    }
    function validateJobPost() {

    }
</script>
{% endblock %}